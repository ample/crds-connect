<div *ngIf="ready">
  <div class="pin-details-dark">
    <div class="media media-dark">
      <profile-picture imageClass="media-object img-size-6" wrapperClass="media-img-wrapper" [contactId]="pin.contactId"></profile-picture>

      <div class="media-body">
        <pin-header [isGathering]="true" [isPinOwner]="isPinOwner" [lastName]="pin.lastName" [firstName]="pin.firstName" [contactId]="pin.contactId"></pin-header>

        <div class="media-meta">
          <readonly-address [isGathering]="true" [isPinOwner]="isPinOwner" [isInGathering]="isInGathering" [address]="pin.address" [distance]="pin.proximity"></readonly-address>
        </div>
      </div>
    </div>

    <p>{{pin.gathering.groupDescription}}</p>

    <div *ngIf="!isInGathering && !isPinOwner">
      <button class="btn btn-secondary" (click)="requestToJoin()">Join gathering</button>
      <say-hi [isGathering]="true" [isLoggedIn]="isLoggedIn" [user]="user" [pin]="pin" [buttonText]="sayHiButtonText"></say-hi>
    </div>
    <button *ngIf="isPinOwner" class="btn primary btn-primary" (click)="edit()">Edit</button>
  </div>

  <pin-login-actions *ngIf="!isLoggedIn" [isGathering]="true"></pin-login-actions>

  <gathering-requests *ngIf="isPinOwner" [pin]="pin"></gathering-requests>

  <div *ngIf="isInGathering">
    <h3>Participants</h3>
    <div *ngFor="let participant of pin.gathering.Participants">
      <div class="row">
        <participant-card [participant]="participant" [pinParticipantId]="pin.participantId"></participant-card>
      </div>
    </div>

    <div class="btn-group">
      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Email all participants <span class="caret"></span>
      </button>
      <ul class="dropdown-menu">
        <li><a href="#">Select all</a></li>
        <li><a href="#">Select none</a></li>
      </ul>
    </div>
  </div>

  <invite-someone *ngIf="isPinOwner" [gatheringId]="pin.gathering.groupId" [participantId]="pin.participantId"></invite-someone>
</div>