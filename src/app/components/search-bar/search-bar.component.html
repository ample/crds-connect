<div class="connect-search">
  <div class="connect-layout-container container">
    <form action="." class="searchbar" (ngSubmit)="$event.preventDefault();onSearch(state.searchBarText)" [class.searchbar-groups]="!isConnectApp" [class.searchbar-expanded]="shouldShowSubmit">
      <div class="input-group">
        <div class="search-input input-transparent">
            <input type="search"
                    class="form-control"
                    id="search-bar-input"
                    [(ngModel)]="state.searchBarText"
                    [ngModelOptions]="{standalone: true}"
                    (keyup)="searchKeyUp()"
                    placeholder={{placeholderTextForSearchBar}}
                    (focus)="showLocationBar(true)"
                    (keydown)="showLocationBar(true)">
          <div class="searchbar-wrapper"></div>
          <span class="addon-btn" [hidden]="isSearchClearHidden" [class.addon-offset]="appSettings.isSmallGroupApp() && !shouldShowSubmit">
            <button type="button" role="button" (click)="resetSearchInput($event)">
              <svg class="icon icon-1" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                <use xlink:href="/assets/svgs/icons.svg#close-thin" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
              </svg>
            </button>
          </span>
          <div *ngIf="appSettings.isSmallGroupApp()" class="input-separator search-desktop"></div>
          <span class="addon-btn search-mobile" *ngIf="appSettings.isSmallGroupApp() && !shouldShowSubmit">
            <button type="button" role="button" (click)="toggleFilters()" [class.open]="state.isFilterDialogOpen" [class.active]="state.isFilterActive">
              <svg class="icon icon-1" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
                <use xlink:href="/assets/svgs/icons.svg#equalizer" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
              </svg>
            </button>
          </span>
        </div>
        <app-location-bar (submit)="onSearch(state.searchBarText)" [hidden]="!shouldShowSubmit" class="force-show-desktop"></app-location-bar>

        <span class="addon-btn search-desktop force-show-desktop" [hidden]="!appSettings.isSmallGroupApp()">
          <button type="button" role="button" (click)="openFilter()" [class.open]="state.isFilterDialogOpen" [class.active]="state.isFilterActive">
            <svg class="icon icon-1" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <use xlink:href="/assets/svgs/icons.svg#equalizer" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
            </svg>
          </button>
        </span>

        <span class="input-group-btn" [class.search-desktop]="!isConnectApp">
          <button type="submit" class="btn btn-secondary">
            <svg class="icon icon-1" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg">
              <use xlink:href="/assets/svgs/icons.svg#search" xmlns:xlink="http://www.w3.org/1999/xlink"></use>
            </svg>
          </button>
        </span>
      </div>
      <div [class.search-desktop]="shouldShowSubmit">
        <button type="button" class="btn btn-link btn-toggle flush-ends hard-sides push-half-left text-white" id="toggleListView" (click)="toggleView()">
          {{state.viewButtonText}}
        </button>
      </div>
      <div class="submit-btns search-mobile" *ngIf="shouldShowSubmit">
        <button type="submit" class="btn btn-secondary" id="searchBtn">
          Search
        </button>
        <button type="button" class="btn btn-link btn-toggle pull-right hard-sides text-white" [class.active]="state.isFilterDialogOpen" id="addFilters" (click)="openFilter(true)">Apply filter</button>
      </div>
    </form>
  </div>
</div>

<app-filters *ngIf="!isConnectApp"
             [hidden]="!state.isFilterDialogOpen"
             (cancelFilter)="filterCancel()"
             class="connect-container connect-layout-container"></app-filters>
