<header class="page-header page-header--no-btm-space">
  <h2>Payment Type:</h2>
</header>

<div class="btn-group form-nav">
  <label class="btn btn-option" [(ngModel)]="gift.paymentMethod" btnRadio="Bank Account">Bank Account</label>
  <label class="btn btn-option" [(ngModel)]="gift.paymentMethod" btnRadio="Credit Card">Credit Card</label>
</div>

<div *ngIf="gift.paymentMethod == 'Bank Account'" heading="Bank Account">
  <header class="page-header page-header--no-btm-space">
    <h2>Account Type:</h2>
  </header>

  <form [formGroup]="achForm" [class.submitted]="achSubmitted" (ngSubmit)="achNext()">
    <div class="radio-group">
      <label>
        <input type="radio" formControlName="accountType" [(ngModel)]="gift.accountType" value="individual" checked> Personal
      </label>&nbsp;&nbsp;
      <label>
        <input type="radio" formControlName="accountType" [(ngModel)]="gift.accountType" value="company"> Business
      </label>
    </div>

    <input type="text" class="form-control" placeholder="Account Holder Name" formControlName="accountName" [(ngModel)]="gift.accountName" pattern=".*"><br>
    <input type="tel" numbersOnly class="form-control" maxlength="9" placeholder="Routing Number" formControlName="routingNumber" [(ngModel)]="gift.routingNumber" pattern="[0-9]*"><br>
    <input type="tel" numbersOnly class="form-control" maxlength="30" placeholder="{{accountNumberPlaceholder}}" formControlName="accountNumber" [(ngModel)]="gift.accountNumber" pattern="\s*[0-9]*\s*">

    <div class="sample-check">
      <small>
        <a (click)="hideCheck = false;" *ngIf="hideCheck">Where can I find this information?</a>
        <a (click)="hideCheck = true;" *ngIf="!hideCheck">Hide sample check</a>
      </small>
      <div [collapse]="hideCheck">
        <img src="/assets/check.svg" alt="" class="img-responsive">
      </div>
    </div>

    <div class="errors" *ngIf="(gift.stripeException || achSubmitted)">
      <div *ngIf="gift.stripeException" class="alert alert-danger">
        <p>Your payment method has been declined.</p>
      </div>
      <div *ngIf="!achForm.valid" class="alert alert-danger">
        <p>{{ errorMessage }}</p>
        <ul>
          <li *ngIf="!achForm.controls['accountName'].valid" >
            Account name <span [innerHTML]="switchMessage(achForm.controls['accountName'].errors)"></span>
          </li>
          <li *ngIf="!achForm.controls['accountNumber'].valid">
            Account number <span [innerHTML]="switchMessage(achForm.controls['accountNumber'].errors)"></span>
          </li>
          <li *ngIf="!achForm.controls['routingNumber'].valid">
            Routing number <span [innerHTML]="switchMessage(achForm.controls['routingNumber'].errors)"></span>
          </li>
        </ul>
      </div>
    </div>

    <footer class="page-footer">
      <a href="#" class="btn btn-previous pull-left" (click)="back()">Go Back</a>
      <input type="button" class="btn btn-next pull-right" (click)="achNext()" value="Next">
    </footer>
  </form>
</div>

<div *ngIf="gift.paymentMethod == 'Credit Card'" heading="Credit Card">
  <!-- <br> -->
  <alert *ngIf="gift.type == 'donation'" dismissible="true">If it's all the same to you, please use your bank account (credit card companies charge Crossroads a fee for each gift).</alert>
  <alert *ngIf="gift.type == 'payment'" dismissible="true">If it's all the same to you, please use your bank account (credit card companies charge Crossroads a fee for each purchase).</alert>

  <form [formGroup]="ccForm" [class.submitted]="ccSubmitted" (ngSubmit)="ccNext()">
    <input tabindex="1" type="tel" class="form-control" placeholder="Credit Card Number" formControlName="ccNumber" [(ngModel)]="gift.ccNumber" ccNumber autocomplete="cc-number"><br>
    <div class="row inline-form">
      <div class="col-xs-4 inline-form__input">
        <input tabindex="2" type="tel" class="form-control" maxlength='7' placeholder="Expiration" formControlName="expDate" [(ngModel)]="gift.expDate" ccExp autocomplete="cc-exp"><br>
      </div>
      <div class="col-xs-4 inline-form__input">
        <input tabindex="3" type="tel" class="form-control" maxlength='4' placeholder="CVV" formControlName="cvv" [(ngModel)]="gift.cvv" ccCVV autocomplete="off"><br>
      </div>
      <div class="col-xs-4 inline-form__input">
        <input tabindex="4" type="tel" class="form-control" maxlength='10' placeholder="Zip Code" formControlName="zipCode" [(ngModel)]="gift.zipCode" pattern="^(\d{5}|\d{5}-\d{4})$" autocomplete="zip-code">
      </div>
    </div>

    <div class="errors" *ngIf="ccSubmitted">
      <div *ngIf="!ccForm.valid" class="alert alert-danger">
        <p>{{ errorMessage }}</p>
        <ul>
          <li *ngIf="!ccForm.controls['ccNumber'].valid" >
            Card number <span [innerHTML]="switchMessage(ccForm.controls['ccNumber'].errors)"></span>
          </li>
          <li *ngIf="!ccForm.controls['expDate'].valid">
            Expiration Date <span [innerHTML]="switchMessage(ccForm.controls['expDate'].errors)"></span>
          </li>
          <li *ngIf="!ccForm.controls['cvv'].valid">
            CVV <span [innerHTML]="switchMessage(ccForm.controls['cvv'].errors)"></span>
          </li>
          <li *ngIf="!ccForm.controls['zipCode'].valid">
            Zip code <span [innerHTML]="switchMessage(ccForm.controls['zipCode'].errors)"></span>
          </li>
        </ul>
      </div>
    </div>

    <footer class="page-footer">
      <a href="#" class="btn btn-previous pull-left" (click)="back()">Go Back</a>
      <input type="button" class="btn btn-next pull-right" (click)="ccNext()" value="Next">
    </footer>
  </form>
</div>
